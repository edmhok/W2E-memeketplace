"use strict";(self.webpackChunkwaste2earn_home=self.webpackChunkwaste2earn_home||[]).push([[2229],{1932:(e,n,o)=>{o.d(n,{YG:()=>a});var t=o(53248),i=o(12293),u=o(88971);function a(){const e=(0,i.DA)();return(0,t.useCallback)((async(n,o)=>{if(!(0,i.bJ)(o)){const t=await(0,u.no)(n,o);e({canisterId:o,standard:t})}}),[])}},62229:(e,n,o)=>{o.d(n,{R8:()=>O,Gm:()=>M,Vs:()=>q,XV:()=>S,xh:()=>D,Wk:()=>I,Lx:()=>h,si:()=>B});var t=o(9259),i=o(53248),u=o(4262),a=o(56315),r=o(35479),l=o(86255),c=o(68800),d=o(94766),s=o(32435),R=o(62453),v=o(93835),f=o(91983),m=o(24788),_=o(98127),C=o(84401),b=o(52166),p=o(83686),U=o(22799),E=o(81748),y=o(65612),g=o(88971),k=o(58333),N=o(64560),P=o(69012),A=o(59257),w=o(1932);const L=["ew2hr-oaaaa-aaaan-qcycq-cai","m4mib-siaaa-aaaan-qaucq-cai","4ch4l-viaaa-aaaan-qa3bq-cai","uldch-7yaaa-aaaan-qa2wq-cai","2d2yc-biaaa-aaaan-qa4ka-cai"];var Y=o(74344);function B(){const[e,n]=(0,i.useState)(!0),o=(0,w.YG)(),{result:t}=(0,g.od)(),[u,a]=(0,i.useState)([]);return(0,i.useEffect)((()=>{if(n(!0),t&&t.length>0){const e=[];let i=0;function u(){if(i===(null===t||void 0===t?void 0:t.length)){const o=[];e.forEach(((e,n)=>{e&&o.push({...e,id:t[n]})})),a(o),n(!1)}}t.forEach((async(n,t)=>{(await(0,k.Rm)()).positions(n).then((async n=>{const a=(0,r.Pk)(n).data;if(a){const e=await(await(0,k.h2)()).getPool("".concat(null===a||void 0===a?void 0:a.token0,"_").concat(null===a||void 0===a?void 0:a.token1,"_").concat(String(null===a||void 0===a?void 0:a.fee)));await o(e,a.token0),await o(e,a.token1)}e[t]=a,i++,u()})).catch((n=>{i++,u(),e[t]=void 0,console.error(n)}))}))}else n(!1),a([])}),[t,n]),(0,i.useMemo)((()=>({loading:e,result:u})),[e,u])}function S(){const e=(0,u.jL)(),[n,o]=(0,i.useState)(!0),t=(0,w.YG)(),{result:a}=(0,g.D$)();return(0,i.useEffect)((()=>{if(o(!0),a&&a.length>0){const n=[];let i=0;function u(){if(i===(null===a||void 0===a?void 0:a.length)){const t=[];n.forEach(((e,n)=>{e&&t.push({...e,id:a[n]})})),e((0,Y.Lx)(t)),o(!1)}}a.forEach((async(e,o)=>{(await(0,k.iq)()).positions(e).then((async e=>{const a=(0,r.Pk)(e).data;if(a){const e=await(await(0,k.qy)()).getPool("".concat(null===a||void 0===a?void 0:a.token0,"_").concat(null===a||void 0===a?void 0:a.token1,"_").concat(String(null===a||void 0===a?void 0:a.fee)));await t(e,a.token0),await t(e,a.token1)}n[o]=a,i++,u()})).catch((e=>{i++,u(),n[o]=void 0,console.error(e)}))}))}else o(!1),e((0,Y.Lx)([]))}),[e,a,o]),n}function h(){return(0,u.GV)((e=>e.swapV2Liquidity.userPositions))}function q(){return(0,u.GV)((e=>e.swapV2Liquidity))}function I(){const e=(0,u.jL)();return(0,i.useCallback)((()=>{e((0,Y.JE)())}),[e])}function M(e,n,o,u,r,C){var g,k,w;const{independentField:Y,typedValue:B,leftRangeValue:S,rightRangeValue:h,startPrice:I}=q(),M=Y===a.b_.CURRENCY_A?a.b_.CURRENCY_B:a.b_.CURRENCY_A,[O,D,T]=(0,i.useMemo)((()=>[null===e||void 0===e?void 0:e.wrapped,null===n||void 0===n?void 0:n.wrapped,null===u||void 0===u?void 0:u.wrapped]),[e,n,u]),z=(0,i.useMemo)((()=>({[a.b_.CURRENCY_A]:e,[a.b_.CURRENCY_B]:n})),[e,n]),[V,W]=(0,i.useMemo)((()=>O&&D?O.sortsBefore(D)?[O,D]:[D,O]:[void 0,void 0]),[O,D]),x=(0,A.Le)(),{result:F}=(0,N.rL)(x,O),{result:G}=(0,N.rL)(x,D),X={[a.b_.CURRENCY_A]:F,[a.b_.CURRENCY_B]:G},[Q,j]=(0,E.Q2)(z[a.b_.CURRENCY_A],z[a.b_.CURRENCY_B],o),K=Q===E.S.NOT_EXISTS,J=Q===E.S.LOADING,$=Boolean(T&&V&&!T.equals(V)),H=(0,i.useMemo)((()=>{if(!K)return j&&V?j.priceOf(V):void 0;{const n=(0,p.lI)(I||"0.1",$?V:W);if(n&&V&&W){var e;const o=(0,p.lI)("1",$?W:V),t=o&&n?new l.g(o.currency,n.currency,o.quotient,n.quotient):void 0;return null!==(e=$?null===t||void 0===t?void 0:t.invert():t)&&void 0!==e?e:void 0}}}),[K,I,$,W,V,j]),Z=(0,i.useMemo)((()=>{const e=H?(0,c.r)(H.numerator,H.denominator):void 0;return H&&e&&!(y.xB.greaterThanOrEqual(e,d.g.MIN_SQRT_RATIO)&&y.xB.lessThan(e,d.g.MAX_SQRT_RATIO))}),[H]),ee=(0,i.useMemo)((()=>{if(O&&D&&o&&H&&!Z){const e=(0,s.d)(H),n=d.g.getSqrtRatioAtTick(e);return new R.b("",O,D,o,n,y.xB.BigInt(0),e,[])}}),[o,Z,H,O,D]),ne=null!==j&&void 0!==j?j:ee,oe=(0,i.useMemo)((()=>({[a.zm.LOWER]:o?(0,v.Y)(d.g.MIN_TICK,f.D6[o]):void 0,[a.zm.UPPER]:o?(0,v.Y)(d.g.MAX_TICK,f.D6[o]):void 0})),[o]),te=(0,i.useMemo)((()=>({[a.zm.LOWER]:"number"===typeof(null===r||void 0===r?void 0:r.tickLower)?r.tickLower:$&&"boolean"===typeof h||!$&&"boolean"===typeof S?oe[a.zm.LOWER]:$?(0,b.W)(W,V,o,h.toString()):(0,b.W)(V,W,o,S.toString()),[a.zm.UPPER]:"number"===typeof(null===r||void 0===r?void 0:r.tickUpper)?r.tickUpper:!$&&"boolean"===typeof h||$&&"boolean"===typeof S?oe[a.zm.UPPER]:$?(0,b.W)(W,V,o,S.toString()):(0,b.W)(V,W,o,h.toString())})),[r,o,$,S,h,V,W,oe]),{[a.zm.LOWER]:ie,[a.zm.UPPER]:ue}=te||{},ae=(0,i.useMemo)((()=>({[a.zm.LOWER]:o&&ie===oe.LOWER,[a.zm.UPPER]:o&&ue===oe.UPPER})),[oe,ie,ue,o]),re=(0,i.useMemo)((()=>C?{[a.zm.LOWER]:!!ae[a.zm.UPPER]||void 0,[a.zm.UPPER]:!!ae[a.zm.LOWER]||void 0}:ae),[ae,C]),le=Boolean("number"===typeof ie&&"number"===typeof ue&&ie>=ue),ce=(0,i.useMemo)((()=>({[a.zm.LOWER]:(0,U.M)(V,W,te[a.zm.LOWER]),[a.zm.UPPER]:(0,U.M)(V,W,te[a.zm.UPPER])})),[V,W,te]),{[a.zm.LOWER]:de,[a.zm.UPPER]:se}=ce,Re=Boolean(!le&&H&&de&&se&&(H.lessThan(de)||H.greaterThan(se))),ve=(0,p.lI)(B,z[Y]),fe=(0,i.useMemo)((()=>{const o=null===ve||void 0===ve?void 0:ve.wrapped,t=M===a.b_.CURRENCY_B?n:e;if(ve&&o&&"number"===typeof ie&&"number"===typeof ue&&ne){if(Re||le)return;const e=o.currency.equals(ne.token0)?m.y.fromAmount0({pool:ne,tickLower:ie,tickUpper:ue,amount0:ve.quotient,useFullPrecision:!0}):m.y.fromAmount1({pool:ne,tickLower:ie,tickUpper:ue,amount1:ve.quotient}),n=o.currency.equals(ne.token0)?e.amount1:e.amount0;return t&&_.e.fromRawAmount(t,n.quotient)}}),[ve,Re,M,n,e,ie,ue,ne,le]),me=(0,i.useMemo)((()=>({[a.b_.CURRENCY_A]:Y===a.b_.CURRENCY_A?ve:fe,[a.b_.CURRENCY_B]:Y===a.b_.CURRENCY_A?fe:ve})),[fe,ve,Y]),_e=Boolean("number"===typeof ue&&ne&&ne.tickCurrent>=ue),Ce=Boolean("number"===typeof ie&&ne&&ne.tickCurrent<=ie),be=le||Boolean(_e&&ne&&O&&ne.token0.equals(O)||Ce&&ne&&O&&ne.token1.equals(O)),pe=le||Boolean(_e&&ne&&D&&ne.token0.equals(D)||Ce&&ne&&D&&ne.token1.equals(D)),Ue=(0,i.useMemo)((()=>{var e,n;if(!ne||!O||!D||"number"!==typeof ie||"number"!==typeof ue||le)return;const o=_e?a.CL:null===me||void 0===me||null===(e=me[O.equals(ne.token0)?a.b_.CURRENCY_A:a.b_.CURRENCY_B])||void 0===e?void 0:e.quotient,t=Ce?a.CL:null===me||void 0===me||null===(n=me[O.equals(ne.token0)?a.b_.CURRENCY_B:a.b_.CURRENCY_A])||void 0===n?void 0:n.quotient;return void 0!==o&&void 0!==t?m.y.fromAmounts({pool:ne,tickLower:ie,tickUpper:ue,amount0:o,amount1:t,useFullPrecision:!0}):void 0}),[me,ne,O,D,_e,Ce,le,ie,ue]),Ee=[a.b_.CURRENCY_A,a.b_.CURRENCY_B].reduce(((e,n)=>({...e,[n]:(0,P.r)(X[n])})),{}),ye=[a.b_.CURRENCY_A,a.b_.CURRENCY_B].reduce(((e,n)=>{var o,t;return{...e,[n]:null===(o=Ee[n])||void 0===o?void 0:o.equalTo(null!==(t=me[n])&&void 0!==t?t:"0")}}),{});let ge;var ke,Ne,Pe,Ae;Q===E.S.INVALID&&(ge=null!==(ke=ge)&&void 0!==ke?ke:t.Ru._({id:"R7D79P"}));(K&&(ge=t.Ru._({id:"eud8y4"})),Z)&&(ge=null!==(Ne=ge)&&void 0!==Ne?Ne:t.Ru._({id:"HXBqgG"}));le&&(ge=null!==(Pe=ge)&&void 0!==Pe?Pe:t.Ru._({id:"4fr6Aw"}));(me[a.b_.CURRENCY_A]||be)&&(me[a.b_.CURRENCY_B]||pe)||(ge=null!==(Ae=ge)&&void 0!==Ae?Ae:t.Ru._({id:"iPMIoT"}));const{[a.b_.CURRENCY_A]:we,[a.b_.CURRENCY_B]:Le}=me;var Ye,Be;we&&null!==X&&void 0!==X&&null!==(g=X[a.b_.CURRENCY_A])&&void 0!==g&&g.lessThan(we)&&(ge="Insufficient ".concat(null===(Ye=z[a.b_.CURRENCY_A])||void 0===Ye?void 0:Ye.symbol," balance"));Le&&null!==X&&void 0!==X&&null!==(k=X[a.b_.CURRENCY_B])&&void 0!==k&&k.lessThan(Le)&&(ge="Insufficient ".concat(null===(Be=z[a.b_.CURRENCY_B])||void 0===Be?void 0:Be.symbol," balance"));return L.includes(null!==(w=null===j||void 0===j?void 0:j.id)&&void 0!==w?w:"")&&(ge=t.Ru._({id:"eud8y4"})),{ticks:te,pricesAtTicks:ce,invalidRange:le,outOfRange:Re,invalidPrice:Z,parsedAmounts:me,dependentField:M,depositADisabled:be,depositBDisabled:pe,ticksAtLimit:re,errorMessage:ge,position:Ue,price:H,invertPrice:$,pool:j,noLiquidity:K,currencyBalances:X,atMaxAmounts:ye,maxAmounts:Ee,poolLoading:J}}function O(e){const n=(0,u.jL)();return{onFieldAInput:(0,i.useCallback)((e=>{n((0,Y._B)({field:a.b_.CURRENCY_A,typedValue:e}))}),[n,e]),onFieldBInput:(0,i.useCallback)((e=>{n((0,Y._B)({field:a.b_.CURRENCY_B,typedValue:e}))}),[n,e]),onLeftRangeInput:(0,i.useCallback)((e=>{n((0,Y.i1)(e))}),[n]),onRightRangeInput:(0,i.useCallback)((e=>{n((0,Y.ZT)(e))}),[n]),onStartPriceInput:(0,i.useCallback)((e=>{n((0,Y.bv)(e))}),[n])}}function D(e,n,o,t,a,r){const l=(0,u.jL)(),c=(0,i.useMemo)((()=>null===e||void 0===e?void 0:e.wrapped),[e]),d=(0,i.useMemo)((()=>null===n||void 0===n?void 0:n.wrapped),[n]);return{getDecrementLower:(0,i.useCallback)((()=>{if(c&&d&&"number"===typeof t&&o){return(0,s.y)(c,d,t-f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}if("number"!==typeof t&&c&&d&&o&&r){return(0,s.y)(c,d,r.tickCurrent-f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}return""}),[c,d,t,o,r]),getIncrementLower:(0,i.useCallback)((()=>{if(c&&d&&"number"===typeof t&&o){return(0,s.y)(c,d,t+f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}if("number"!==typeof t&&c&&d&&o&&r){return(0,s.y)(c,d,r.tickCurrent+f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}return""}),[c,d,t,o,r]),getDecrementUpper:(0,i.useCallback)((()=>{if(c&&d&&"number"===typeof a&&o){return(0,s.y)(c,d,a-f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}if("number"!==typeof a&&c&&d&&o&&r){return(0,s.y)(c,d,r.tickCurrent-f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}return""}),[c,d,a,o,r]),getIncrementUpper:(0,i.useCallback)((()=>{if(c&&d&&"number"===typeof a&&o){return(0,s.y)(c,d,a+f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}if("number"!==typeof a&&c&&d&&o&&r){return(0,s.y)(c,d,r.tickCurrent+f.D6[o]).toSignificant(5,void 0,C.VS.ROUND_UP)}return""}),[c,d,a,o,r]),getSetFullRange:(0,i.useCallback)((()=>{l((0,Y.mb)())}),[l])}}},22799:(e,n,o)=>{o.d(n,{M:()=>i});var t=o(32435);function i(e,n,o){if(e&&n&&"number"===typeof o)return(0,t.y)(e,n,o)}},69012:(e,n,o)=>{o.d(n,{r:()=>i});var t=o(98127);function i(e){if(!e)return;return e.subtract(t.e.fromRawAmount(e.currency,2*e.currency.transFee))}},52166:(e,n,o)=>{o.d(n,{W:()=>s});var t=o(86255),i=o(68800),u=o(94766),a=o(32435),r=o(93835),l=o(91983),c=o(7695),d=o.n(c);function s(e,n,o,c){if(!e||!n||!o||!c)return;const s=function(e,n,o){var i;if(!e||!n||!o)return;if(!o.match(/^\d*\.?\d+$/))return;const[u,a]=o.split("."),r=null!==(i=null===a||void 0===a?void 0:a.length)&&void 0!==i?i:0,l=d().BigInt((null!==u&&void 0!==u?u:"")+(null!==a&&void 0!==a?a:""));return new t.g(e,n,d().multiply(d().BigInt(10**r),d().BigInt(10**e.decimals)),d().multiply(l,d().BigInt(10**n.decimals)))}(e,n,c);if(!s)return;let R;const v=(0,i.r)(s.numerator,s.denominator);return R=d().greaterThanOrEqual(v,u.g.MAX_SQRT_RATIO)?u.g.MAX_TICK:d().lessThanOrEqual(v,u.g.MIN_SQRT_RATIO)?u.g.MIN_TICK:(0,a.d)(s),(0,r.Y)(R,l.D6[o])}}}]);
//# sourceMappingURL=2229.d45b8c22.chunk.js.map